<!--{eval include template(TPLDIR.'header.htm',1);}--><div class="tab_a"><a href="$theurl"<!--{if empty($_MGET['type'])}--> id="click"<!--{/if}-->>文章调用</a>&nbsp;&nbsp; <a href="$theurl-type-category"<!--{if $_MGET['type']=='category'}--> id="click"<!--{/if}-->>系统分类</a>&nbsp;&nbsp; <a href="$theurl-type-friendlinks"<!--{if $_MGET['type']=='friendlinks'}--> id="click"<!--{/if}-->>友情链接</a><div class="clear"></div></div><div class="wrap" style="margin-top:0"><!--{if !empty($block)}--><textarea class="textarea">$block</textarea><div class="notice"><h2>使用说明：</h2><p>&lt;!--&#123;block name="article" parameter="数据模块的条件"&#125;--&gt;<span>通过数据模块条件程序会自动生成SQL查询语句并查询后保存到&#36;_MBLOCK['{$_POST['name']}']变量里。</span><br /> &lt;!--{loop &#36;_MBLOCK['{$_POST['name']}'] &#36;value}--&gt; <span> loop指变量循环开始，并把数据变量&#36;_MBLOCK['{$_POST['name']}']的内容存到 &#36;value里。</span><br />&lt;li&gt;&lt;a href=&quot;&#36;value['url']&quot;&gt;&#36;value['subject']&lt;/a&gt;&lt;/li&gt; <span>根据格式取出变量里的内容，使用&lt;li&gt;这个HTML标签格式化。</span><br />&lt;!--{/loop}--&gt;<span>循环结束</span></p><p>如果想知道有哪些字段可供调用，可以使用&lt;!--&#123;eval print_r(&#36;_MBLOCK['{$_POST['name']}'])&#125;--&gt;打印变量查看。</p></div><!--{elseif empty($_MGET['type'])}--><form action="$theurl" method="post" enctype="multipart/form-data" id="settingsform"><input type="hidden" name="formhash" value="$formhash" /><p><strong>变量名称:</strong> <input name="name" type="text" class="theinput" size="30" placeholder="英文/拼音" value="" autofocus="autofocus"/><span>设置一个变量名称，以英文或者下划线开始，由字母数字下划线组成。（将存放在&#36;_MBLOCK[变量名]里）</span></p>  <p><strong>指定ID:</strong><input name="isid" type="radio" value="1" onclick="$('#isid').show();" />是&nbsp;&nbsp; <input name="isid" type="radio" value="0" onclick="$('#isid').hide();" checked/>否&nbsp;&nbsp; <span>指定文章ID 单独调用。</span></p> <p id="isid"><strong>指定ID:</strong><input name="haveid" type="text" size="30" placeholder="输入文章的ID号" class="theinput" value="" /><span>设置要单独调用的文章ID，多个请用英文的逗号隔开。</span></p><p><strong>作者uid：</strong><input name="uid" type="text" class="theinput" placeholder="不限制请留空" size="30" value="" /><span>设置只调用某个用户的文章，多个请用英文的逗号隔开。</span></p><p><strong>分类catid：</strong><!--{loop $_MGLOBAL['category'] $value}--><input type="checkbox" class="checkbox" name="catid[]" value="$value[catid]"> $value['name']<!--{/loop}--><span>选择需要调用的分类。</span></p><p><strong>文章等级grade：</strong><select class="select" name="grade"><option value="" selected>请选择等级</option><!--{loop $checkgrade $key $value}--><option value="$key">$value</option><!--{/loop}--></select><span>如果需要区别等级的情况下请选择一个文章等级。</span></p><p><strong>是否精华digest:</strong><input name="digest" type="radio" value="1" />是&nbsp;&nbsp; <input name="digest" type="radio" value="0" checked/>否&nbsp;&nbsp; <span>指定是否调用精华文章。</span></p><p><strong>是否置顶top:</strong><input name="top" type="radio" value="1" />是&nbsp;&nbsp; <input name="top" type="radio" value="0" checked/>否&nbsp;&nbsp; <span>指定是否调用置顶文章。</span></p><p><strong>是否包括图片:</strong><input name="cover" type="radio" value="1" />是&nbsp;&nbsp; <input name="cover" type="radio" value="0" checked/>否&nbsp;&nbsp; <span>指定是否调用置顶文章。</span></p><p><strong>是否读取内容:</strong><input name="getcon" type="radio" value="1" onclick="$('#getcon').show();" />是&nbsp;&nbsp; <input name="getcon" type="radio" value="0" onclick="$('#getcon').hide();" checked/>否&nbsp;&nbsp; <span>读取内容会消耗服务器内存，不需要显示内容请选择“否”。</span></p><p id="getcon"><strong>内容截取字符：</strong><input name="conlen" class="theinput" type="text" style="width:65px" size="2" placeholder="数字" value="" /> &nbsp; <label> <input name="condot" type="radio" value="1" checked/> 有省略号&nbsp;&nbsp; <input name="condot" type="radio" value="0"/> 无省略号</label><span>为空表示不截取标题完全显示。</span></p><p><strong>缓存时间：</strong><select class="select" name="cachetime"><option value="0">不缓存</option><option value="60">1分钟</option><option value="600">10分钟</option><option value="1800">30分钟</option><option value="3600">1小时</option><option value="7200">2小时</option><option value="43200">12小时</option>    <option value="86400" selected>1天</option>    </select><span>设置数据的缓存时间。</span></p><p><strong>标题截取字符：</strong><input name="subjectlen" class="theinput" type="text" style="width:65px" size="2" placeholder="数字" value="" /> &nbsp; <label> <input name="subjectdot" type="radio" value="1" checked/> 有省略号&nbsp;&nbsp; <input name="subjectdot" type="radio" value="0"/> 无省略号</label><span>为空表示不截取标题完全显示。</span></p><p>默认显示最新发布的文章，可按条件组合排序。</p><p><strong>排序方式1按：</strong><select class="select" style="width:98px" name="odertype1"><option value="dateline" selected>发布时间</option><option value="lastpost">修改时间</option><option value="viewnum">查看数</option><option value="replynum">回复数</option></select> <select class="select" style="width:98px" name="oder1"><option value="0" selected>倒序</option><option value="1">顺序</option></select> <span>例如：按发布时间倒序为最新文章，顺序为最老文章。</span></p><p><strong>排序方式2按：</strong><select class="select" name="odertype2"><option value="" selected> 请选择排序</option><option value="dateline">发布时间</option><option value="lastpost">修改时间</option><option value="viewnum">查看数</option><option value="replynum">回复数</option></select> <select class="select" name="oder2"><option value="" selected>请选择排序</option><option value="0">倒序</option><option value="1">顺序</option></select> <span>例如：按发布时间倒序为最新文章，顺序为最老文章。</span></p><p><strong>排序方式3按：</strong><select class="select" name="odertype3"><option value="" selected> 请选择排序</option><option value="dateline">发布时间</option><option value="lastpost">修改时间</option><option value="viewnum">查看数</option><option value="replynum">回复数</option></select> <select class="select" name="oder3"><option value="" selected>请选择排序</option><option value="0">倒序</option><option value="1">顺序</option></select> <span>例如：按发布时间倒序为最新文章，顺序为最老文章。</span></p><p><strong>调用数量从:</strong><input name="limitstart" style="width:40px" class="theinput" type="text" size="2" value="0" /> 条开始，共需要调用<input name="limit" class="theinput" style="width:40px" type="text" size="2" value="10" />条数据</p><input type="submit" name="makeblocksubmit" value="生成模块数据" class="setsubmint"></form><!--{elseif $_MGET['type']=='category'}--><textarea class="textarea">&lt;!--&#123;loop &#36;_MGLOBAL['category'] &#36;value&#125;--&gt;&lt;li&gt;&lt;a href=&quot;&#35;action/category/catid/&#36;value['catid']&#35;&quot;&lt;!--&#123;if &#36;value['note']&#125;--&gt; title=&quot;&#36;value['note']&quot;&lt;!--&#123;/if&#125;--&gt;&gt;&#36;value['name']&lt;/a&gt;&lt;/li&gt;&lt;!--&#123;/loop&#125;--&gt;</textarea><div class="notice"><h2>使用说明：</h2><p>&lt;!--&#123;loop &#36;_MGLOBAL['category'] &#36;value&#125;--&gt; <span> loop指变量循环开始，并把数据变量&#36;_MGLOBAL['category']的内容存到 &#36;value里。</span><br />&lt;li&gt;&lt;a href=&quot;&#35;action/category/catid/&#36;value['catid']&#35;&quot;&lt;!--&#123;if &#36;value['note']&#125;--&gt; title=&quot;&#36;value['note']&quot;&lt;!--&#123;/if&#125;--&gt;&gt;&#36;value['name']&lt;/a&gt;&lt;/li&gt; <span>根据格式取出变量里的内容，使用&lt;li&gt;这个HTML标签格式化。其中if是对变量&#36;value['note']进行判断，如果分类有介绍就把介绍当成title使用。</span><br />&lt;!--{/loop}--&gt;<span>循环结束</span></p><h2>放到模板后的效果演示：</h2><ul><!--{loop $_MGLOBAL['category'] $value}--><li><a href="#action/category/catid/$value['catid']#"<!--{if $value['note']}--> title="$value['note']"<!--{/if}-->>$value['name']</a></li><!--{/loop}--></ul></div><!--{elseif $_MGET['type']=='friendlinks'}--><textarea class="textarea">&lt;!--&#123;if &#36;friendlinks&#125;--&gt;&lt;div id="firendlink"&gt;&lt;strong&gt;友情链接&lt;/strong&gt;&lt;!--&#123;loop &#36;friendlinks &#36;value&#125;--&gt; &lt;a href="&#36;value['url']" &lt;!--&#123;if !empty(&#36;value['description'])&#125;--&gt;title="&#36;value['description']" &lt;!--&#123;/if&#125;--&gt;target="_blank"&gt;&#36;value['name']&lt;/a&gt;&lt;!--&#123;/loop&#125;--&gt;&lt;/div&gt;&lt;!--&#123;/if&#125;--&gt;</textarea><div class="notice"><h2>使用说明：</h2><p>友情链接调用代码只能放到<strong>首页模板</strong>里才能正常使用。</p>  </div><!--{/if}--></div><!--{eval include template(TPLDIR.'footer.htm',1);}-->